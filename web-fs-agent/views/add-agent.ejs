<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/styles/add-fs.css" />
  <title>FS Agent</title>
</head>

<body>
    <main>
        <p>Welcome <%= locals.name %></p>
        <div class="" id="">
            <a href="/agent/admin" style="font-size: larger;"><h1>Agent Management</h1></a>  
        </div> 
    <% if (locals.searchAgent && locals.profile == "admin") { %>
        <div class="" id="">
            <a href="/agent/admin"><h1>Search Agent</h1></a>  
        </div> 
        <div class="" id="search-box">
        <div>
            <form id="">
            <label for="idTel">Search Agent by email:</label>
            <input type="text" id="email" name="email" placeholder="agent email" autocomplete="off" required="true">

            <label for="submit"></label>
            <input id="search" type="submit" value="Search" formaction="/agent/admin/searchbyemail" formmethod="post">
            </form>
        </div>
        </div>
    <% } %> 

    <% if (locals.foundAgent && locals.profile == "admin") { %>
        <div class="" id="">
            <a href="/agent/admin"><h1>Found Agent</h1></a>  
        </div> 
        <div class="edit-box" id="">
        <% agentDetail.forEach(agent => { %>
        <h2>Found agent ðŸ˜ƒ</h2>
            <form id="myForm" method="get">
            <p>Agent Id: <%= agent.id %></p> 

            <h3>Email: <%= agent.email %></h3>

            <h4>First Name: <%= agent.first_name %></h4>

            <h4>Last Name: <%= agent.last_name %></h4>

            <label for="submit"></label>
            <input id="submit" type="submit" value="Edit" formaction="/agent/admin/editagent/<%= agent.id %>">
            <input id="submit" type="submit" value="Reset Password" formaction="/agent/admin/setpassword/<%= agent.id %>">
            </form>
        <% }) %>
        
        </div>
    <% } %>

    

    <% if (locals.newAgent && locals.profile == "admin") { %>
        <div class="" id="">
            <a href="/agent/admin"><h1>Create New Agent</h1></a>  
        </div> 
        <div class="edit-box" id="">
        <h2>Email not in used, create new agent</h2>
        <form id="myForm" method="post">
            <label for="emailInput">Agent Email:</label>
            <input type="text" id="" name="email" value="<%= locals.emailInSearch %>" required="true">

            <label for="passwordInput">Agent password:</label>
            <input type="password" id="" name="password" placeholder="password" required="true">

            <label for="firstName">First Name:</label>
            <input type="text" id="" name="firstName" placeholder="agent first name" required="true">

            <label for="lastName">Last Name:</label>
            <input type="text" id="" name="lastName" placeholder="agent last name" required="true">

            <label for="submit"></label>
            <input id="submit" type="submit" value="Create" formaction="/agent/admin/createagent">
        </form>
        </div>
    <% } %>

    

    <script src="/scripts/add-guest.js" charset="utf-8"></script>
    </main>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <footer>Copyright Â© Simapps Solution <%= new Date().getFullYear() %>
    </footer>
</body>

</html>